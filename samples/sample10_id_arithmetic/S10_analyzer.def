# ID Arithmetic Example
# Tokens: ID (single letter), NUM (digits), operators (+, *, -)
# Grammar: identifier can be NUM, or identifier op identifier

%%LEX
# Single lowercase letter
ID [a-z]

# One or more digits
NUM [0-9]+

# Operators
PLUS \+
TIMES \*
MINUS -

# Whitespace (skip)
WHITESPACE [ \t\r]+
NEWLINE \n

%%YACC
# Document is a list of identifier expressions
document -> expr_list
    { $$ = create_node("document", 1, $1); }

# List of expressions
expr_list -> expression
    { $$ = create_node("expr_list", 1, $1); }
    | expr_list expression
    { $$ = create_node("expr_list", 2, $1, $2); }

# An expression is an identifier followed by newline
expression -> identifier NEWLINE
    { $$ = create_node("expression", 2, $1, $2); }

# Identifier rules: can be NUM, or identifier op identifier
identifier -> NUM
    { $$ = create_node("identifier", 1, $1); }
    | identifier PLUS identifier
    { $$ = create_node("identifier", 3, $1, $2, $3); }
    | identifier TIMES identifier
    { $$ = create_node("identifier", 3, $1, $2, $3); }
    | identifier MINUS identifier
    { $$ = create_node("identifier", 3, $1, $2, $3); }
    | ID
    { $$ = create_node("identifier", 1, $1); }
