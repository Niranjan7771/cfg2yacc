# üé® cfg2yacc Parse Tree GUI

A graphical user interface for visualizing parse trees generated by cfg2yacc.

## üöÄ Quick Start

### Option 1: Use the Launcher Script
```bash
./run_gui.sh
```

### Option 2: Manual Setup
```bash
# 1. Build cfg2yacc
make clean && make

# 2. Generate parser
./cfg2yacc -i samples/expr.ebnf -o expr.y --emit-lex expr.l --no-ff
bison -d expr.y && flex expr.l && gcc -o parser expr.tab.c lex.yy.c ast.c -lfl

# 3. Launch GUI
python3 parse_tree_gui.py
```

## üìã Requirements

- **Python 3** with tkinter
- **cfg2yacc** (built)
- **Generated parser** (parser executable)

### Install tkinter (if needed):
```bash
# Ubuntu/Debian
sudo apt-get install python3-tk

# macOS (with Homebrew)
brew install python-tk

# Windows
# tkinter comes with Python by default
```

## üéØ Features

### üå≥ **Parse Tree Visualization**
- **Step-by-step derivation** showing each grammar rule application
- **Color-coded rules** for easy identification:
  - üîµ **Blue**: Terminal symbols (NUMBER, literals)
  - üü¢ **Green**: Non-terminal expansions  
  - ‚ö™ **Gray**: Empty productions (Œµ)

### üìù **Dual Output Modes**
- **Visual Tree Tab**: Graphical parse tree display
- **Raw Output Tab**: Original parser output

### üéÆ **Interactive Controls**
- **Input field** for custom expressions
- **Example buttons** for quick testing:
  - Simple: `42`
  - Addition: `1+2`
  - Precedence: `1+2*3`
  - Parentheses: `(1+2)*3`
  - Complex: `((1+2)*3)+4`

### ‚öôÔ∏è **Parser Management**
- **Parser selection** with file browser
- **Automatic JSON mode** detection
- **Error handling** with clear messages

## üñºÔ∏è Screenshots

### Valid Expression Parse Tree
```
üå≥ Parse Tree Derivation
 1. factor -> NUMBER
 2. term__gen_4 -> Œµ
 3. factor -> NUMBER
 4. factor -> NUMBER
 5. term__gen_4__gen_5 -> '*' factor
 6. term__gen_4 -> Œµ
 7. term__gen_4 -> term__gen_4__gen_5 term__gen_4
 8. term -> factor term__gen_4
 9. expr__gen_1__gen_2 -> '+' term
10. expr__gen_1 -> Œµ
11. expr__gen_1 -> expr__gen_1__gen_2 expr__gen_1
12. expr -> factor term__gen_4 expr__gen_1
‚úÖ Total derivation steps: 12
```

### Error Display
```
‚ùå Parse Failed
parse error: syntax error, unexpected '+', expecting NUMBER or '('
```

## üîß Usage Examples

### Test Different Expressions
```bash
# Launch GUI and try these expressions:
42              # Simple number
1+2             # Basic addition  
1+2*3           # Operator precedence
(1+2)*3         # Parentheses
((1+2)*3)+4     # Nested expressions
1++2            # Error case
```

### Use Different Grammars
```bash
# Generate parser for EBNF features
./cfg2yacc -i samples/ebnf_features.ebnf -o features.y --emit-lex features.l --no-ff
bison -d features.y && flex features.l && gcc -o features_parser features.tab.c lex.yy.c ast.c -lfl

# In GUI: Browse -> select features_parser
# Test: (id1, id2)
```

## üõ†Ô∏è Technical Details

### JSON Output Mode
The enhanced parser supports `--json` flag for structured output:
```bash
echo "1+2" | ./parser --json
```

Output:
```json
{
  "parse_tree": [
    {"step": 1, "rule": "factor -> NUMBER"},
    {"step": 2, "rule": "term__gen_4 -> Œµ"},
    {"step": 3, "rule": "factor -> NUMBER"},
    {"step": 4, "rule": "expr__gen_1__gen_2 -> '+' term"},
    {"step": 5, "rule": "expr__gen_1 -> Œµ"},
    {"step": 6, "rule": "expr__gen_1 -> expr__gen_1__gen_2 expr__gen_1"},
    {"step": 7, "rule": "expr -> factor term__gen_4 expr__gen_1"}
  ],
  "success": true,
  "steps": 7
}
```

### GUI Architecture
- **tkinter**: Cross-platform GUI framework
- **subprocess**: Parser execution
- **JSON parsing**: Structured data handling
- **Canvas drawing**: Tree visualization

## üêõ Troubleshooting

### Common Issues

**"Parser not found"**
```bash
# Make sure parser is built
ls -la parser
# If missing, rebuild:
./cfg2yacc -i samples/expr.ebnf -o expr.y --emit-lex expr.l --no-ff
bison -d expr.y && flex expr.l && gcc -o parser expr.tab.c lex.yy.c ast.c -lfl
```

**"tkinter not available"**
```bash
# Install tkinter
sudo apt-get install python3-tk  # Ubuntu/Debian
```

**"Parse timeout"**
- Check if parser executable is correct
- Try simpler expressions first
- Verify parser works in terminal: `echo "1+2" | ./parser`

### Debug Mode
```bash
# Test parser manually
echo "1+2*3" | ./parser          # Regular mode
echo "1+2*3" | ./parser --json   # JSON mode
```

## üé® Customization

### Modify Colors
Edit `parse_tree_gui.py`:
```python
# Line ~180: Color coding
if 'Œµ' in rhs:
    color = "gray"          # Empty productions
elif any(term in rhs for term in ["NUMBER", "ID", "'", "("]):
    color = "blue"          # Terminals
else:
    color = "darkgreen"     # Non-terminals
```

### Add New Examples
Edit `parse_tree_gui.py`:
```python
# Line ~60: Example expressions
examples = [
    ("Simple", "42"),
    ("Addition", "1+2"),
    ("Your Example", "custom_expression"),
    # Add more here...
]
```

## üìö Related Files

- `parse_tree_gui.py` - Main GUI application
- `run_gui.sh` - Launcher script
- `src/emitter.c` - Enhanced YACC generator with JSON support
- `samples/*.ebnf` - Example grammars

## ü§ù Contributing

Feel free to enhance the GUI with:
- Better tree layout algorithms
- More visualization options
- Additional parser support
- Export functionality (PNG, SVG, etc.)

---

**Happy parsing! üå≥‚ú®**